var ForrstNavigator=function(){var d={c:99,g:103,j:106,k:107,l:108,v:118},b;b||(b={});b.Activity={toggleLike:function(){var a=b.Window.closestElements(".activity").current;$(a).hasClass("activity")},view:function(){var a=b.Window.closestElements(".activity").current;if($(a).hasClass("activity")){a=$(a).find(".view");if(a.length>0)document.location=a[0].href}}};b.Navigator={newPost:function(){document.location="http://forrst.com/posts/new"},goToPrevious:function(){var a=b.Window.closestElements(".activity").previous;
b.Window.moveTo(a,true)},goToNext:function(){var a=b.Window.closestElements(".activity").next;b.Window.moveTo(a,false)}};b.Window={threshold:1,closestElements:function(a){var c=$(window).scrollTop(),f=null,h=null,i=null;$(a).each(function(j,e){var g=$(e).offset().top;if(g+b.Window.threshold<c)i=e;else if(!f&&g-b.Window.threshold>c)f=e;else if(Math.abs(c-g)<=b.Window.threshold*2)h=e});return{current:h,next:f,previous:i}},moveTo:function(a,c){if(a)window.scrollTo(0,$(a).offset().top);else c&&window.scrollTo(0,
0)}};document.addEventListener("keypress",function(a){if(!a)a=window.event;switch(a.keyCode?a.keyCode:a.which){case d.c:b.Navigator.newPost();break;case d.j:b.Navigator.goToNext();break;case d.k:b.Navigator.goToPrevious();break;case d.l:b.Activity.toggleLike();break;case d.v:b.Activity.view();break}},true)};
function addJQuery(d){var b=document.createElement("script"),a=function(){var c=document.createElement("script");c.textContent="("+d.toString()+")();";document.body.appendChild(c)};if(typeof $!==undefined)a();else{b.setAttribute("src","http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js");b.addEventListener("load",function(){a()},false);document.body.appendChild(b)}}addJQuery(ForrstNavigator);